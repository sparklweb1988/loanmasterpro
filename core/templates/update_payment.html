{% extends 'base.html' %}
{% block content %}
<div class="container">
    <h2>Update Payment</h2>
    <form method="POST" action="{% url 'update_payment' payment.id %}">
        {% csrf_token %}

        <!-- CLIENT SELECT: pre-select the client of this payment -->
        <div class="form-group">
            <label for="client_id">Client:</label>
            <select name="client_id" id="client_id" required>
                <option value="">Select Client</option>
                {% for client in clients %}
                <option value="{{ client.id }}" {% if payment.client.id == client.id %}selected{% endif %}>
                    {{ client.name }} ({{ client.client_id }})
                </option>
                {% endfor %}
            </select>
        </div>

        <!-- LOAN SELECT: pre-select the loan of this payment -->
        <div class="form-group">
            <label for="loan_id">Loan:</label>
            <select name="loan_id" id="loan_id" required>
                <option value="">Select Loan</option>
                {% for loan in loans %}
                <option value="{{ loan.id }}" {% if payment.loan.id == loan.id %}selected{% endif %}>
                    {{ loan.product }} - OLB: â‚¦{{ loan.olb }}
                </option>
                {% endfor %}
            </select>
        </div>

        <!-- <div class="form-group">
            <label>Recorded By:</label>
            <input type="text" name="record" id="record">
        </div> -->


        <!-- PAYMENT AMOUNT: pre-fill with the existing payment amount -->
        <div class="form-group">
            <label for="amount">Payment Amount</label>
            <input type="number" id="amount" name="amount" step="0.01" required value="{{ payment.amount }}">
        </div>

        <!-- SUBMIT & CANCEL -->
        <div class="form-group">
            <button type="submit" class="btn btn-primary">Update Payment</button>
            <a href="{% url 'payment_history' %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}