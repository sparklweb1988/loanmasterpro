{% extends 'base.html' %} {% block content %}
<div class="container">
  <h2>Loan List</h2>
  <br />
  <a href="{% url 'create_loan' %}">Create New Loan</a>
  <br /><br />

  <!-- Desktop Table View -->
  <div class="desktop-view">
    <table>
      <thead>
        <tr>
          <th>Loan ID</th>
          <th>Client</th>
          <th>Product</th>
          <th>Principal Amount</th>
          <th>Interest Rate (%)</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Total Installments</th>
          <th>Loan Amount</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for loan in loans %}
        <tr>
          <td>{{ loan.client.client_id }}</td>
          <td>{{ loan.client.name }}</td>
          <td>{{ loan.product }}</td>
          <td>&#8358; {{ loan.principal }}</td>
          <td>&#37; {{ loan.interest_rate }}</td>
          <td>{{ loan.start_date }}</td>
          <td>{{ loan.end_date }}</td>
          <td>{{ loan.total_installments }}</td>
          <td>&#8358; {{ loan.principal_interest }}</td>
          <td>
            <a href="{% url 'edit_loan' loan.id %}">Edit</a> |
            <a href="{% url 'delete_loan' loan.id %}"
              onclick="return confirm('Are you sure you want to delete this loan?')">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="9">No loans found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Mobile Card View -->
  <div class="mobile-view">
    {% for loan in loans %}
    <div class="mobile-card">
      <h3>Loan ID: {{ loan.id }}</h3>
      <p>
        <strong>Client:</strong> {{ loan.client.client_id }} - {{
        loan.client.name }}
      </p>
      <p><strong>Product:</strong> {{ loan.product }}</p>
      <p><strong>Principal Amount:</strong> {{ loan.principal }}</p>
      <p><strong>Interest Rate (%):</strong> {{ loan.interest_rate }}</p>
      <p><strong>Start Date:</strong> {{ loan.start_date }}</p>
      <p><strong>End Date:</strong> {{ loan.end_date }}</p>
      <p><strong>Total Installments:</strong> {{ loan.total_installments }}</p>
      <div class="mobile-actions">
        <a href="{% url 'edit_loan' loan.id %}" class="action-btn edit">Edit</a>
        <a href="{% url 'delete_loan' loan.id %}" class="action-btn delete"
          onclick="return confirm('Are you sure you want to delete this loan?')">Delete</a>
      </div>
    </div>
    {% empty %}
    <p>No loans found.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}